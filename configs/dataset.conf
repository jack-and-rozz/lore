#################################
#         Opensubtitles
#################################
# Number of movies in opensubtitles dataset. Each movie contain around 1,000 sentences on average.
# 291513 en/train.jsonlines.merged (23M~ uttr-res pairs)
#  16194 en/dev.jsonlines.merged
#  16194 en/test.jsonlines.merged
#   2344 ja/train.jsonlines.merged (2.1M~ uttr-res pairs)
#    129 ja/dev.jsonlines.merged
#    129 ja/test.jsonlines.merged

TRAIN = 10000
VALID = 100
TEST = 100

# Dataset built from original opensubtitles dataset and stores as jsonlines.
opensubtitles_base {
  iterations_per_epoch = 0
  minlen = {
     train = {
       word = 0
       char = 5
     }
     test = {
       word = 0
       char = 0
     }
  }
  maxlen = {
     train = {
       word = 20
       char = 10
     }
     test = {
       word = 0
       char = 0
     }
  }
  # Numbers of "Movies". Each movie contains about 1,000 sentences.
  max_rows = { 
    train=${TRAIN}
    valid=${VALID}
    test=${TEST}
  }
  batch_size = {
    train = 256
    test = 256
  }
  dataset_type='' # This entry changes depending on the task.
}

######################################

opensubtitles_untrans_en2ja = ${opensubtitles_base}{
  source_dir = dataset/untrans_en2ja
  dataset_type = UnsupervisedTranslationDataset
  filename = { # utterances and responses are supposed to be concatenated by tab in a text file.
    train = [train.txt.src, train.txt.trg]
    valid = dev.trans
    test = test.trans
  }
  max_rows = {
    train = [${TRAIN}, ${TRAIN}] # 23000000
    valid = ${VALID} # 10000 
    test = ${TEST}  # 1000
  }
  batch_size = {
    train = [256, 128]
    test = 256
  }
}

opensubtitles_pairwise = ${opensubtitles_base}{
  filename = { # utterances and responses are supposed to be concatenated by tab in a text file.
    train = train.txt
    valid = dev.txt
    test = test.txt
  }
  max_rows = {
    train = 0 # 23000000
    valid = 10000 # 10000 
    test = 1000  # 1000
  }
}


opensubtitles_pairwise_ja = ${opensubtitles_pairwise}{
  source_dir = dataset/ja
}

opensubtitles_pairwise_ja_dial =  ${opensubtitles_pairwise_ja}{
   dataset_type=PairwiseDialogueDataset
}
opensubtitles_pairwise_ja_dial_test =  ${opensubtitles_pairwise_ja}{
   dataset_type=PairwiseDialogueDataset
   max_rows = {
      train=-1
   }
}
opensubtitles_pairwise_ja_auto =  ${opensubtitles_pairwise_ja}{
   dataset_type=PairwiseAutoEncoderDataset
}

opensubtitles_pairwise_ja_select = ${opensubtitles_pairwise_ja}{
   dataset_type=PairwiseResponseSelectionDataset
}


opensubtitles_pairwise_en = ${opensubtitles_pairwise}{
  source_dir = dataset/en
}

opensubtitles_pairwise_en_dial = ${opensubtitles_pairwise_en}{
   dataset_type=PairwiseDialogueDataset
}

opensubtitles_pairwise_en_auto = ${opensubtitles_pairwise_en}{
   dataset_type=PairwiseAutoEncoderDataset
}
opensubtitles_pairwise_en_select = ${opensubtitles_pairwise_en}{
   dataset_type=PairwiseResponseSelectionDataset
}



#################################
#           ASPEC
#################################



aspec_base {
  iterations_per_epoch = 0
  minlen = {
     train = {
       word = 0
       char = 5
     }
     test = {
       word = 0
       char = 0
     }
  }
  maxlen = {
     train = {
       word = 20
       char = 10
     }
     test = {
       word = 0
       char = 0
     }
  }
  # Numbers of "Movies". Each movie contains about 1,000 sentences.
  max_rows = { 
    train=0 
    valid=0
    test=0
  }
  batch_size = {
    train = 256
    test = 256
  }

  dataset_type=''
  source_dir=''
}


# aspec_trans_en2ja = ${aspec_base}{
#   source_dir = dataset/supervised
# }

aspec_untrans_en2ja = ${aspec_base}{
  source_dir = dataset/corpus.tok
  dataset_type = UnsupervisedTranslationDataset
  filename = { # utterances and responses are supposed to be concatenated by tab in a text file.
    train = [train-12.tok.en, train-12.tok.ja]
    valid = [dev.tok.en, dev.tok.ja]
    test =  [test.tok.en, test.tok.ja]
  }
  max_rows = {
    train = [100000, 100000] # 23000000
    valid = 10000 # 10000 
    test = 1000  # 1000
  }
  batch_size = {
    train = [256, 256]
    test = 256
  }
}

